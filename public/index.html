<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CIV-DASH: City Simulation</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body class="civ-theme">
  <!-- TOP SITUATION BAR -->
  <header class="top-bar">
    <div class="top-brand">
      <span class="brand-text">CIV-DASH v1.0</span>
      <span class="status-dot" id="status-dot"></span>
      <span class="status-text" id="status-text">SYSTEM_READY</span>
    </div>

    <div class="top-metrics">
      <div class="top-metric-item">
        <span class="label">TICK</span>
        <span class="val" id="val-tick">--</span>
      </div>
      <div class="top-metric-item">
        <span class="label">SESSION</span>
        <span class="val" id="val-session-id">--</span>
      </div>
      <div class="top-metric-item">
        <span class="label">OUTCOME</span>
        <span class="val" id="val-outcome">--</span>
      </div>
    </div>

    <div class="top-resources">
      <div class="res-item" title="Grain"><span class="icon">GRI</span><span class="val" id="val-grain">--</span></div>
      <div class="res-item" title="Gold"><span class="icon">GLD</span><span class="val" id="val-gold">--</span></div>
      <div class="res-item" title="Population"><span class="icon">POP</span><span class="val" id="val-pop">--</span></div>
      <div class="res-item" title="Security"><span class="icon">SEC</span><span class="val" id="val-sec">--</span></div>
      <div class="res-item" title="Armament"><span class="icon">ARM</span><span class="val" id="val-arm">--</span></div>
    </div>

    <div class="top-gov">
      <div class="gov-item" title="Security">SEC <span id="val-gov-sec">--</span></div>
      <div class="gov-item" title="Morale">MOR <span id="val-gov-mor">--</span></div>
      <div class="gov-item" title="Corruption">COR <span id="val-gov-cor">--</span></div>
      <div class="gov-item alert" title="Collapse Value">CV <span id="val-cv">--</span>/<span id="val-cv-max">--</span></div>
    </div>
  </header>

  <div class="main-layout">
    
    <!-- LEFT SIDE: Board & Events -->
    <div class="col-main">
      <section class="province-board panel">
        <div class="panel-head">
          <span>== PROVINCE_MAP ==</span>
          <span class="sub-stat">ANNEXED: <span id="val-cities">--</span></span>
        </div>
        <div class="panel-body">
          <div id="tiers-container" class="tiers-container">
            <div class="ascii-placeholder">AWAITING_SESSION...</div>
          </div>
        </div>
      </section>

      <section class="events-section panel" id="events-panel" style="display: none;">
        <div class="panel-head">== PENDING_EVENTS ==</div>
        <div class="panel-body">
          <div id="events-container" class="events-container">
            <!-- Injected via JS -->
          </div>
        </div>
      </section>
    </div>

    <!-- RIGHT SIDE: Command Dock & Chronicle -->
    <aside class="col-side">
      <section class="action-dock panel">
        <div class="panel-head">== COMMAND_DOCK ==</div>
        <div class="panel-body">
          
          <!-- SETUP -->
          <form id="sim-form" class="cmd-form">
            <div class="form-row">
              <label>SEED</label>
              <input type="number" id="seed" value="42" required>
            </div>
            <div class="form-row">
              <label>DIFF</label>
              <select id="difficulty">
                <option value="newbie">NEWBIE</option>
                <option value="easy">EASY</option>
                <option value="standard" selected>STD</option>
                <option value="hard">HARD</option>
              </select>
            </div>
            <button type="submit" id="btn-run" class="btn-primary">[ INIT_SESSION ]</button>
          </form>

          <!-- CONTROL -->
          <div id="session-controls" class="session-controls" style="display: none;">
            <div class="cmd-divider">-- TIME_CONTROL --</div>
            <div class="btn-group">
              <button id="btn-pause-resume" class="btn-cmd" type="button">[ PAUSE ]</button>
              <button id="btn-step" class="btn-cmd" type="button">[ STEP ]</button>
            </div>
            <div class="slider-group">
              <label>SPD <span id="speed-label">1x</span></label>
              <input type="range" id="speed-slider" min="1" max="10" value="1">
            </div>
            <div class="cmd-divider">-- STATE_IO --</div>
            <div class="btn-group">
              <button id="btn-save" class="btn-cmd" type="button">[ SAVE ]</button>
              <button id="btn-load" class="btn-cmd" type="button">[ LOAD ]</button>
            </div>
          </div>

          <!-- ACTION -->
          <div id="action-panel" class="action-panel" style="display: none;">
            <div class="cmd-divider">-- ANNEX_PROTOCOL --</div>
            <div class="form-row">
              <label>LANE</label>
              <select id="annex-lane">
                <option value="economy">ECONOMY</option>
                <option value="diplomacy">DIPLOMACY</option>
                <option value="war">WAR</option>
              </select>
            </div>
            <div class="form-row">
              <label>CITY</label>
              <input type="text" id="annex-city" placeholder="Select or type">
            </div>
            <button id="btn-do-annex" class="btn-cmd warning" type="button">[ EXEC_ANNEX ]</button>
            <div id="annex-feedback" class="cmd-feedback"></div>
          </div>

        </div>
      </section>

      <section class="chronicle-panel panel">
        <div class="panel-head">== CHRONICLE_LOG ==</div>
        <div class="panel-body">
          <div id="logs-container" class="logs-container">
            <!-- Logs -->
          </div>
        </div>
      </section>

      <section class="rules-panel panel">
        <div class="panel-head">== RULES_SNAPSHOT ==</div>
        <div class="panel-body">
          <ul id="rules-list" class="rules-list">
            <li>AWAITING_SESSION...</li>
          </ul>
        </div>
      </section>

      <section class="json-panel panel">
        <div class="panel-head">
          <span>== STATE.JSON ==</span>
          <button id="btn-copy" class="btn-text" type="button">[COPY]</button>
        </div>
        <div class="panel-body">
          <pre><code id="json-output">// Waiting...</code></pre>
        </div>
      </section>
    </aside>

  </div>

  <script src="script.js"></script>
</body>
</html>
